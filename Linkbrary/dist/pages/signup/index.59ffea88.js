function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=globalThis,r={},n={},o=t.parcelRequire4fc2;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var o={id:e,exports:{}};return r[e]=o,t.call(o.exports,o,o.exports),o.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire4fc2=o);var s=o.register;s("kkxYr",function(t,r){e(t.exports,"handleSubmit",()=>i),e(t.exports,"handlePasswordToggleClick",()=>l),e(t.exports,"setFocusInOutListenerById",()=>c);var n=o("g2Qjw"),s=o("4UL1w");function a(e){let t=e.target;(0,n.removeErrorMessage)(t.parentElement)}function u(e){let t=s.FOCUS_OUT_FUNCTIONS[e.target.id];t&&t(e.target)}function i(e){e.preventDefault();let t=document.activeElement;t&&t.blur(),(0,s.SUBMIT_FUNCTIONS[e.target.id])()}function l(e){e.preventDefault();let t=e.currentTarget.previousElementSibling;t.type="password"===t.type?"text":"password",e.currentTarget.querySelectorAll("img").forEach(e=>{e.classList.toggle("hidden"),e.style.opacity=e.classList.contains("hidden")?0:1})}function c(e){let t=document.querySelector(e);t&&(t.addEventListener("focus",a),t.addEventListener("focusout",u))}}),s("g2Qjw",function(t,r){function n(e,t){o(e);let r=document.createElement("P");r.textContent=t,r.className="error-message",e.appendChild(r),e.querySelector(".sign-input").classList.add("wrong-input")}function o(e){let t=e.querySelector(".error-message");t&&e.removeChild(t),e.querySelector(".sign-input").classList.remove("wrong-input")}e(t.exports,"default",()=>n),e(t.exports,"removeErrorMessage",()=>o)}),s("4UL1w",function(t,r){e(t.exports,"FOCUS_OUT_FUNCTIONS",()=>u),e(t.exports,"SUBMIT_FUNCTIONS",()=>i);var n=o("dxKPH"),s=o("MKGdC"),a=o("dqAWj");let u={"user-email":n.default,password:a.default,"password-check":a.isSamePassword},i={"sign-in-form":s.signInSubmit,"sign-up-form":s.signUpSubmit}}),s("dxKPH",function(t,r){e(t.exports,"default",()=>s),o("4UL1w");var n=o("g2Qjw");function s(e){var t;return 0===e.value.length?((0,n.default)(e.parentElement,"이메일을 입력해주세요"),!1):(t=e.value,!!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||((0,n.default)(e.parentElement,"올바른 이메일 주소가 아닙니다."),!1))}}),s("MKGdC",function(t,r){e(t.exports,"signInSubmit",()=>a),e(t.exports,"signUpSubmit",()=>u);var n=o("bymNe"),s=o("82xp4");function a(){(0,n.requestAuthorization)(document.querySelector("#user-email"),document.querySelector("#password"))}function u(){(0,s.requestSignUp)(document.querySelector("#user-email"),document.querySelector("#password"),document.querySelector("#password-check"))}}),s("bymNe",function(t,r){e(t.exports,"requestAuthorization",()=>u);var n=o("g2Qjw"),s=o("47Y78"),a=o("8sh3D");async function u(e,t){if(!(0,s.isValidInput)(e,t))return;let r={email:e.value,password:t.value},o=(0,a.makeRequestOptions)(r);try{let e=await fetch("https://bootcamp-api.codeit.kr/api/sign-in",o);if(!e.ok)throw Error("Bad request");let t=await e.json();(0,a.handleLoginResponse)(t)}catch(r){console.log(r),(0,n.default)(e.parentElement,"이메일을 확인해 주세요"),(0,n.default)(t.parentElement,"비밀번호를 확인해 주세요")}}}),s("47Y78",function(t,r){e(t.exports,"isValidInput",()=>a);var n=o("dxKPH"),s=o("dqAWj");function a(e,t){return(0,n.default)(e)&&(0,s.default)(t)}}),s("dqAWj",function(t,r){e(t.exports,"default",()=>s),e(t.exports,"isSamePassword",()=>a);var n=o("g2Qjw");function s(e){let t=e.value;return document.querySelector("#sign-up-form")&&!function(e){let t=e.value;return!!(!(t.length<8)&&/[a-zA-Z]/.test(t)&&/\d/.test(t))}(e)?((0,n.default)(e.parentElement,"비밀번호는 영문, 숫자 조합 8자 이상 입력해 주세요."),!1):0!==t.length||((0,n.default)(e.parentElement,"비밀번호를 입력해주세요"),!1)}function a(e){return document.querySelector("#password").value===document.querySelector("#password-check").value||((0,n.default)(e.parentElement,"비밀번호가 일치하지 않아요"),!1)}}),s("8sh3D",function(t,r){function n(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}}function o(e){var t;return t=e.accessToken,localStorage.setItem("accessToken",t),window.location.href="/folder.html",Promise.resolve()}e(t.exports,"makeRequestOptions",()=>n),e(t.exports,"handleLoginResponse",()=>o)}),s("82xp4",function(t,r){e(t.exports,"requestSignUp",()=>i);var n=o("dxKPH"),s=o("g2Qjw"),a=o("dqAWj"),u=o("8sh3D");async function i(e,t,r){if(!(0,n.default)(e)||!(0,a.default)(t)||!(0,a.isSamePassword)(r))return;try{let t={email:e.value},r=(0,u.makeRequestOptions)(t);if(!(await fetch("https://bootcamp-api.codeit.kr/api/check-email",r)).ok)throw Error("Bad request")}catch(t){console.log(t),(0,s.default)(e.parentElement,"이미 사용중인 이메일입니다");return}let o={email:e.value,password:t.value},i=(0,u.makeRequestOptions)(o);try{let e=await fetch("https://bootcamp-api.codeit.kr/api/sign-up",i);if(!e.ok)throw Error("Bad request");let t=await e.json();(0,u.handleLoginResponse)(t)}catch{alert("회원가입 제출 형식이 잘못되었습니다!");return}}});var a=o("kkxYr");!function(){if(localStorage.getItem("accessToken")){window.location.href="/folder";return}for(let e of document.querySelectorAll(".pw-toggle-btn"))e.addEventListener("click",a.handlePasswordToggleClick);(0,a.setFocusInOutListenerById)("#user-email"),(0,a.setFocusInOutListenerById)("#password"),(0,a.setFocusInOutListenerById)("#password-check"),document.querySelector("#sign-up-form").addEventListener("submit",a.handleSubmit)}();
//# sourceMappingURL=index.59ffea88.js.map
